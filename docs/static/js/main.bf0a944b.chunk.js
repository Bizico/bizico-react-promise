(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,n,t){"use strict";t.r(n),t.d(n,"query",function(){return L}),t.d(n,"Query",function(){return j}),t.d(n,"createPromise",function(){return M}),t.d(n,"manipulation",function(){return S}),t.d(n,"Manipulation",function(){return T}),t.d(n,"createManipulationPromise",function(){return B}),t.d(n,"PromisePropTypes",function(){return f}),t.d(n,"ManipulationPropTypes",function(){return b}),t.d(n,"manipulationPropTypes",function(){return v}),t.d(n,"compose",function(){return F}),t.d(n,"useQuery",function(){return K}),t.d(n,"useManipulate",function(){return U}),t.d(n,"useLoadingForStates",function(){return I});var a=t(21),r=t.n(a),o=t(1),i=t.n(o),l=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),u=function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e},c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},d=function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},p=function(e,n){var t={};for(var a in e)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},m=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n},_=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(t.push(i.value),!n||t.length!==n);a=!0);}catch(s){r=!0,o=s}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=r.a.shape({data:r.a.any,loading:r.a.bool.isRequired,error:r.a.oneOfType([r.a.string,r.a.object,r.a.instanceOf(Error)]),refetch:r.a.func.isRequired}),h={name:r.a.string,defaultData:r.a.any,promise:r.a.func.isRequired,skip:r.a.func,variables:r.a.oneOfType([r.a.func,r.a.object]),loading:r.a.func,error:r.a.func,complete:r.a.func},b=r.a.shape({loading:r.a.bool.isRequired,error:r.a.oneOfType([r.a.string,r.a.object,r.a.instanceOf(Error)])}),v=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var a={loading:r.a.bool.isRequired,error:r.a.oneOfType([r.a.string,r.a.object,r.a.instanceOf(Error)])},o=c({},a);return n.forEach(function(e){o[e]=r.a.shape(c({},a,{manipulate:r.a.func.isRequired})).isRequired}),r.a.shape(o)},E={name:r.a.string,promises:r.a.object,loading:r.a.func,error:r.a.func},g=function(e){return e&&"[object Function]"==={}.toString.call(e)},y=["name","defaultData","skip","promise","loading","error","complete","variables","children"],O=function(e){var n={};for(var t in e)y.includes(t)||(n[t]=e[t]);return n},P=function(e){var n,t=e.variables,a=p(e,["variables"]),r=null;return g(t)?r=t(O(a)):(n=t)&&"[object Object]"==={}.toString.call(n)&&(r=t),r},C=function(e){var n=e.defaultData,t=p(e,["defaultData"]);return g(n)?n(O(t)):n||null},D=function e(){var n=this;l(this,e),this.generateKey=function(){return Date.now()},this.call=function(e){n.lastPromiseKey=n.generateKey();var t=n.lastPromiseKey;return new Promise(function(a,r){e.then(function(e){t===n.lastPromiseKey&&a(e)}).catch(function(e){t===n.lastPromiseKey&&r(e)})})},this.cancel=function(){n.lastPromiseKey=n.generateKey()},this.lastPromiseKey=this.generateKey()},R=function(e){function n(e){l(this,n);var t=m(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));k.call(t);var a=e.skip;return t.skip=a(e),t.state={loading:!t.skip,error:null,data:C(e)},t.loaded=!1,t.isMount=!1,t.promiseSwitch=new D,t}return d(n,e),s(n,[{key:"componentDidMount",value:function(){this.isMount=!0,this.skip||(this.query(),this.loaded=!0)}},{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.skip,a=n.variables;this.loaded||t(this.props)?!this.skip&&a&&function(e,n){for(var t in e)if(!(t in n))return!0;for(var a in n)if(e[a]!==n[a])return!0;return!1}(P(e),P(this.props))&&this.refetch():(this.skip=!1,this.loaded=!0,this.refetch())}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"render",value:function(){var e=this.state,n=e.loading,t=e.error,a=this.props,r=a.name,o=a.loading,i=a.error,l=a.children,s=c({},O(this.props),P(this.props),u({},r,c({},this.state,{refetch:this.refetch})));return n&&o?o(s):t&&i?i(s):l?l(s):null}}]),n}(i.a.PureComponent),k=function(){var e=this;this.query=function(){for(var n=arguments.length,t=Array(n),a=0;a<n;a++)t[a]=arguments[a];var r=e.props,o=r.promise,i=r.complete,l=c({},O(e.props),P(e.props));e.promiseSwitch.call(Promise.resolve(o.apply(void 0,[l].concat(t)))).then(function(n){var t=i(n);return e.isMount&&e.setState({loading:!1,data:t,error:null}),t}).catch(function(n){e.isMount&&e.setState({loading:!1,error:n})})},this.refetch=function(){return e.state.loading||e.setState({loading:!0}),e.query.apply(e,arguments)}};R.propTypes=h,R.defaultProps={skip:function(){return!1},complete:function(e){return e},name:"data",defaultData:null,variables:null,loading:null,error:null};var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{hoc:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var a=function(a){return i.a.createElement(R,c({},a,e,n),function(e){return i.a.createElement(t,e)})};return a.displayName="hoc(PromiseWrapper)",a}},component:function(n){return i.a.createElement(R,c({},e,n))}}},w=M(),L=w.hoc,j=w.component,x=function(e){function n(e){l(this,n);var t=m(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.manipulate=function(e,n){return function(){for(var a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];var i=t.switchers[e],l=t.state[e];return l.loading||t.setState(u({},e,c({},l,{loading:!0}))),i.call(Promise.resolve(n.apply(void 0,[t.props].concat(r)))).then(function(n){return t.isMount&&t.setState(u({},e,c({},l,{loading:!1,error:null,data:n}))),n}).catch(function(n){throw t.isMount&&t.setState(u({},e,c({},l,{loading:!1,error:n}))),n})}};var a=e.promises,r=void 0===a?{}:a;return t.isMount=!1,t.state={},t.switchers={},Object.keys(r).forEach(function(e){var n=r[e];t.state[e]={loading:!1,error:null,data:null,manipulate:t.manipulate(e,n)},t.switchers[e]=new D}),t}return d(n,e),s(n,[{key:"componentDidMount",value:function(){this.isMount=!0}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"render",value:function(){var e=this.props,n=e.name,t=void 0===n?"manipulation":n,a=(e.promises,e.loading),r=e.error,o=e.children,i=p(e,["name","promises","loading","error","children"]),l=Object.values(this.state),s=l.some(function(e){return e.loading}),d=l.find(function(e){return e.error}),m=c(u({},t,c({},this.state,{loading:s,error:d?d.error:null})),i);return a&&s?a(m):r&&d?r(m):o?o(m):null}}]),n}(i.a.PureComponent);x.propTypes=c({},E);var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{hoc:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var a=function(a){return i.a.createElement(x,c({},a,e,n),function(e){return i.a.createElement(t,e)})};return a.displayName="hoc(ManipulationWrapper)",a}},component:function(n){return i.a.createElement(x,c({},e,n))}}},A=B(),S=A.hoc,T=A.component,F=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce(function(e,n){return function(){return e(n.apply(void 0,arguments))}},function(e){return e})},I=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return Object(o.useMemo)(function(){return n.some(function(e){return e.loading})},n)},q=function(e,n){var t=Object(o.useMemo)(function(){return new D},[]);return[Object(o.useCallback)(function(){return n(function(e){return e.loading?e:c({},e,{loading:!0})}),t.call(e.apply(void 0,arguments)).then(function(e){return n(function(n){return c({},n,{loading:!1,data:e,error:null})}),e}).catch(function(e){throw n(function(n){return c({},n,{loading:!1,error:e})}),e})},[n,t]),t]},U=function(e){var n=Object(o.useState)({loading:!1,error:null,data:null}),t=_(n,2),a=t[0],r=t[1],i=q(e,r),l=_(i,2),s=l[0],u=l[1];return Object(o.useEffect)(function(){return function(){u.cancel()}},[]),[a,s]},K=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(o.useMemo)(function(){return c({},e.config,t)},[]),r=Object(o.useState)({loading:!a.skip,error:null,data:a.defaultData}),i=_(r,2),l=i[0],s=i[1],u=q(n,s),d=_(u,2),p=d[0],m=d[1];return Object(o.useEffect)(function(){return!a.skip&&p(),function(){m.cancel()}},[t.variables,p]),[l,p]},W={skip:!1,defaultData:null,variables:null};Object.defineProperty(K,"config",{configurable:!0,get:function(){return W}}),K.updateConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(W,e),W}},297:function(e,n,t){"use strict";var a=t(1),r=t.n(a);n.a=function(e){var n=e.onClick,t=e.expand;return r.a.createElement("span",{className:"code-expand-icon",onClick:n},t?r.a.createElement("img",{alt:"expand code",src:"https://gw.alipayobjects.com/zos/rmsportal/OpROPHYqWmrMDBFMZtKF.svg",className:"code-expand-icon-hide"}):r.a.createElement("img",{alt:"expand code",src:"https://gw.alipayobjects.com/zos/rmsportal/wSAkBuJFbdxsosKKpqyq.svg",className:"code-expand-icon-show"}))}},298:function(e,n,t){"use strict";var a=t(101),r=t(102),o=t(110),i=t(103),l=t(112),s=t(1),u=t.n(s),c=t(299),d=(t(389),t(392),t(394),function(e){function n(){return Object(a.a)(this,n),Object(o.a)(this,Object(i.a)(n).apply(this,arguments))}return Object(l.a)(n,e),Object(r.a)(n,[{key:"render",value:function(){var e=this.props,n=e.children,t=e.updateCode;return u.a.createElement(c.Controlled,{value:n,onBeforeChange:t,options:{mode:"jsx",lineNumbers:!1,lineWrapping:!1,matchBrackets:!0,tabSize:2,theme:"solarized light"}})}}]),n}(u.a.Component));n.a=d},300:function(e,n,t){"use strict";var a=t(160),r=t(1),o=t.n(r);n.a=function(e){var n=e.children,t=Object(a.a)(e,["children"]);return o.a.createElement("div",Object.assign({style:{padding:24,background:"#fff"}},t),n)}},325:function(e,n,t){e.exports=t(644)},51:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return _default});var C_Users_user_AppData_Local_Yarn_Data_global_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(101),C_Users_user_AppData_Local_Yarn_Data_global_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(102),C_Users_user_AppData_Local_Yarn_Data_global_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(110),C_Users_user_AppData_Local_Yarn_Data_global_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(103),C_Users_user_AppData_Local_Yarn_Data_global_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(112),_babel_standalone__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(296),_babel_standalone__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_standalone__WEBPACK_IMPORTED_MODULE_5__),_CodeExpandButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(297),_CodeHighlight__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(298),_Content__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(300),React=__webpack_require__(1),ReactDOM=__webpack_require__(8),PropTypes=__webpack_require__(0),Antd=__webpack_require__(127),BizicoReactPromise=__webpack_require__(115),Loader=__webpack_require__(641).default,Alert=Antd.Alert,Button=Antd.Button,Row=Antd.Row,Col=Antd.Col,Input=Antd.Input,List=Antd.List,query=BizicoReactPromise.query,Query=BizicoReactPromise.Query,manipulation=BizicoReactPromise.manipulation,Manipulation=BizicoReactPromise.Manipulation,manipulationPropTypes=BizicoReactPromise.manipulationPropTypes,compose=BizicoReactPromise.compose,useQuery=BizicoReactPromise.useQuery,useManipulate=BizicoReactPromise.useManipulate,useLoadingForStates=BizicoReactPromise.useLoadingForStates,useState=React.useState,useCallback=React.useCallback,useMemo=React.useMemo,useEffect=React.useEffect,_default=function(_React$Component){function _default(props){var _this;Object(C_Users_user_AppData_Local_Yarn_Data_global_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,_default),_this=Object(C_Users_user_AppData_Local_Yarn_Data_global_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(C_Users_user_AppData_Local_Yarn_Data_global_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(_default).call(this,props)),_this.runExample=function(code){_this.clearExample();var mountNode=_this.node.current,output=_babel_standalone__WEBPACK_IMPORTED_MODULE_5__.transform(code,{presets:["es2015","react"]}).code;eval(output)},_this.updateCode=function(e,n,t){_this.setState({code:t})},_this.toggleCode=function(){_this.setState(function(e){return{expand:!e.expand}})},_this.node=React.createRef();var _code=props.code;return _this.state={code:_code,expand:!1},_this}return Object(C_Users_user_AppData_Local_Yarn_Data_global_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(_default,_React$Component),Object(C_Users_user_AppData_Local_Yarn_Data_global_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(_default,[{key:"componentDidMount",value:function(){this.runExample(this.state.code)}},{key:"componentWillUnmount",value:function(){this.clearExample()}},{key:"clearExample",value:function(){try{ReactDOM.unmountComponentAtNode(this.node.current)}catch(e){console.error(e)}}},{key:"render",value:function(){var e=this,n=this.props.title,t=this.state,a=t.code,r=t.expand;return React.createElement(Row,null,React.createElement(Col,{xs:24,sm:16},React.createElement(_Content__WEBPACK_IMPORTED_MODULE_8__.a,{className:"play-ground"},React.createElement("h2",null,n),React.createElement("div",{ref:this.node}),React.createElement("div",{style:{textAlign:"right"}},React.createElement(_CodeExpandButton__WEBPACK_IMPORTED_MODULE_6__.a,{onClick:this.toggleCode,expand:r})),r&&React.createElement(React.Fragment,null,React.createElement(_CodeHighlight__WEBPACK_IMPORTED_MODULE_7__.a,{updateCode:this.updateCode},a),React.createElement(Button,{type:"primary",onClick:function(){return e.runExample(a)}},"Update")))))}}]),_default}(React.Component)},641:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(69);n.default=function(){return r.a.createElement(o.a,{tip:"Loading..."},"Loading Data ...")}},642:function(e,n,t){},644:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(8),i=t.n(o),l=(t(330),t(331),t(101)),s=t(102),u=t(110),c=t(103),d=t(112),p=t(157),m=t(150),_=t(240),f=t(149),h=(t(332),t(160)),b=t(9),v=function(e){var n=e.path,t=e.exact,a=e.label,o=e.icon,i=Object(h.a)(e,["path","exact","label","icon"]);return r.a.createElement(m.b,{path:n,exact:t,children:function(e){var t=e.match;return r.a.createElement(f.b.Item,Object.assign({},i,{className:t?"".concat(i.rootPrefixCls,"-item-selected"):""}),r.a.createElement(p.b,{to:n},!!o&&r.a.createElement(b.a,{type:o}),r.a.createElement("span",null,a)))}})},E=t(51),g=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(E.a,{title:"Query component",code:'\nconst promise = () => new Promise((resolve) => {\n  setTimeout(() => resolve(\'Loaded Data\'), 2000);\n});\n\nconst Example = () => (\n  <Query\n    name="data"\n    defaultData="Loading ..."\n    promise={promise}\n    loading={(props) => <Loader {...props} />}\n    error={() => <Alert message="ERROR" type="error" />}\n  >\n    {({ data: { data, refetch } }) => (\n      <div>\n        <div>{data}</div>\n        <Button onClick={refetch}>Refresh</Button>\n      </div>\n    )}\n  </Query>\n);\nReactDOM.render(<Example />, mountNode);\n'}),r.a.createElement("br",null),r.a.createElement(E.a,{title:"HOC component",code:"\nconst promise = () => new Promise((resolve) => {\n  setTimeout(() => resolve('Loaded Data'), 1000);\n});\n\nconst Example = ({ data: { data, refetch } }) => (\n  <div>\n    <div>{data}</div>\n    <Button onClick={refetch}>Refresh</Button>\n  </div>\n);\n\nconst Wrapper = query({\n  name: 'data',\n  defaultData: 'Loading ...',\n  promise,\n  loading: (props) => <Loader {...props} />,\n  error: () => <Alert message=\"ERROR\" type=\"error\" />,\n})(Example);\n\n\nReactDOM.render(<Wrapper />, mountNode);\n"}))},y=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(E.a,{title:"Manipulation component",code:"\nconst promises = {\n  updateFirst: () => (\n    new Promise((resolve) => {\n      setTimeout(() => resolve('Loaded: First Data'), 1000);\n    })\n  ),\n  updateSecond: () => (\n    new Promise((resolve) => {\n      setTimeout(() => resolve('Loaded: Second Data'), 1000);\n    })\n  ),\n};\n\nconst Example = () => (\n  <Manipulation\n    name=\"manipulation\"\n    promises={promises}\n    loading={(props) => <Loader {...props} />}\n    error={() => <Alert message=\"ERROR\" type=\"error\" />}\n  >\n    {({ manipulation: { updateFirst, updateSecond } }) => (\n      <div>\n        {updateFirst.data && <div>{updateFirst.data}</div>}\n        {updateSecond.data && <div>{updateSecond.data}</div>}\n        <Button onClick={() => updateFirst.manipulate('First action')}>Update First</Button>\n        <Button onClick={() => updateSecond.manipulate('Second action')}>Update Second</Button>\n      </div>\n    )}\n  </Manipulation>\n);\nReactDOM.render(<Example />, mountNode);\n"}),r.a.createElement("br",null),r.a.createElement(E.a,{title:"HOC component",code:"\nconst promises = {\n  updateFirst: () => (\n    new Promise((resolve) => {\n      setTimeout(() => resolve('Loaded: First Data'), 1000);\n    })\n  ),\n  updateSecond: () => (\n    new Promise((resolve) => {\n      setTimeout(() => resolve('Loaded: Second Data'), 1000);\n    })\n  ),\n};\n\nconst Example = ({ manipulation: { updateFirst, updateSecond } }) => (\n  <div>\n    {updateFirst.data && <div>{updateFirst.data}</div>}\n    {updateSecond.data && <div>{updateSecond.data}</div>}\n    <Button onClick={() => updateFirst.manipulate('First action')}>Update First</Button>\n    <Button onClick={() => updateSecond.manipulate('Second action')}>Update Second</Button>\n  </div>\n);\n\nExample.propTypes = {\n  manipulation: manipulationPropTypes('updateFirst', 'updateSecond').isRequired,\n};\n\nconst Wrapper = manipulation({\n  name: 'manipulation',\n  promises,\n  loading: (props) => <Loader {...props} />,\n  error: () => <Alert message=\"ERROR\" type=\"error\" />,\n})(Example);\n\n\nReactDOM.render(<Wrapper />, mountNode);\n"}))},O=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(E.a,{title:"Manipulation with loaders and errors",code:"\nconst promises = {\n  successPromise: () => (\n    new Promise((resolve) => {\n      setTimeout(() => resolve('Loaded: First Data'), 1000);\n    })\n  ),\n  errorPromise: () => (\n    new Promise((resolve, reject) => {\n      setTimeout(() => reject('Error: Second Data'), 1000);\n    })\n  ),\n};\n\nconst Example = () => (\n  <Manipulation\n    name=\"manipulation\"\n    promises={promises}\n  >\n    {({ manipulation: { successPromise, errorPromise } }) => (\n      <div>\n        <div>\n          {successPromise.loading ? 'Loading First ...' : (\n            successPromise.error || successPromise.data\n          )}\n        </div>\n        <div>\n          {errorPromise.loading ? 'Loading Second ...' : (\n            errorPromise.error || errorPromise.data\n          )}\n        </div>\n        <Button onClick={() => successPromise.manipulate('First action')}>Success</Button>\n        <Button onClick={() => errorPromise.manipulate('Second action')}>Error</Button>\n      </div>\n    )}\n  </Manipulation>\n);\nReactDOM.render(<Example />, mountNode);\n"}))},P=function(){return r.a.createElement(E.a,{title:"List Example",code:"\n// Antd design components\n\nconst ListData = {\n  data: [\n    { id: 1, label: 'Item 1' },\n    { id: 2, label: 'Item 2' },\n    { id: 3, label: 'Item 3' },\n  ],\n  load: function() {\n    return new Promise((resolve) => {\n      setTimeout(() => resolve([...this.data]), 1000);\n    });\n  },\n  add: function (label) {\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        const id = Math.floor((Math.random() * 1000) + 1)\n        this.data.push({ label, id });\n        resolve(id);\n      }, 1000);\n    });\n  },\n  remove: function (id) {\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        this.data = this.data.filter((item) => item.id !== id);\n        resolve(id);\n      }, 1000);\n    });\n  },\n};\n\n\nclass ListExample extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { value: '' };\n    this.add = this.add.bind(this);\n    this.remove = this.remove.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  add(label) {\n    if (label) {\n      const { manipulation: { add }, data: { refetch } } = this.props;\n      add.manipulate(label).then(refetch).then(() => this.setState({ value: '' }));\n    }\n  };\n\n  remove(id) {\n    const { manipulation: { remove }, data: { refetch } } = this.props;\n    remove.manipulate(id).then(() => refetch());\n  };\n\n  handleChange(e) {\n    this.setState({ value: e.target.value });\n  };\n\n  render() {\n    const { data: { loading, data }, manipulation } = this.props;\n    const { value } = this.state;\n    const pageLoading = loading || manipulation.loading;\n    return (\n      <React.Fragment>\n        <List loading={pageLoading}>\n          {data.map((item) => (\n            <List.Item\n              key={item.id}\n              actions={[\n                <a href=\"\" onClick={(e) => { e.preventDefault(); this.remove(item.id); }}>delete</a>,\n              ]}\n            >\n              {item.label}\n            </List.Item>\n          ))}\n        </List>\n        {!pageLoading && (\n          <React.Fragment>\n            <br />\n            <Input\n              value={value}\n              onChange={this.handleChange}\n              placeholder=\"new item label\"\n            />\n            <Button onClick={() => this.add(value)}>Add</Button>\n          </React.Fragment>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nconst Component = compose(\n  query({\n    promise: () => ListData.load(),\n    defaultData: [],\n  }),\n  manipulation({\n    promises: {\n      add: (props, data) => ListData.add(data),\n      remove: (props, id) => ListData.remove(id),\n    },\n  }),\n)(ListExample);\n\nReactDOM.render(<Component />, mountNode);\n"})},C=function(){return r.a.createElement(E.a,{title:"List Example with hooks",code:"\n// Antd design components\n\nconst ListData = {\n  data: [\n    { id: 1, label: 'Item 1' },\n    { id: 2, label: 'Item 2' },\n    { id: 3, label: 'Item 3' },\n  ],\n  load: function() {\n    return new Promise((resolve) => {\n      setTimeout(() => resolve([...this.data]), 1000);\n    });\n  },\n  add: function (label) {\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        const id = Math.floor((Math.random() * 1000) + 1)\n        this.data.push({ label, id });\n        resolve(id);\n      }, 1000);\n    });\n  },\n  remove: function (id) {\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        this.data = this.data.filter((item) => item.id !== id);\n        resolve(id);\n      }, 1000);\n    });\n  },\n};\n\nconst ListExample = () => {\n  const [state, refetch] = useQuery(\n    () => ListData.load(),\n    { defaultData: [] },\n  );\n  const [addState, add] = useManipulate(\n    (d) => ListData.add(d),\n  );\n  const [removeState, remove] = useManipulate(\n    (id) => ListData.remove(id),\n  );\n  const loading = useLoadingForStates(state, addState, removeState);\n\n  const [value, setValue] = useState('');\n  \n  const handleChange = useCallback((e) => {\n    setValue(e.target.value);\n  }, [setValue]);\n\n  const handleAdd = useCallback((label) => {\n    if (label) {\n      add(label)\n        .then(() => refetch())\n        .then(() => setValue(''));\n    }\n  }, [add, refetch, setValue]);\n\n  const handleRemove = useCallback((id) => {\n    remove(id).then(() => refetch());\n  }, [remove, refetch]);\n\n  return (\n    <React.Fragment>\n      <List loading={loading}>\n        {state.data.map((item) => (\n          <List.Item\n            key={item.id}\n            actions={[\n              <a href=\"/\" onClick={(e) => { e.preventDefault(); handleRemove(item.id); }}>delete</a>,\n            ]}\n          >\n            {item.label}\n          </List.Item>\n        ))}\n      </List>\n      {!loading && (\n        <React.Fragment>\n          <br />\n          <Input\n            value={value}\n            onChange={handleChange}\n            placeholder=\"new item label\"\n          />\n          <Button onClick={() => handleAdd(value)}>Add</Button>\n          <Button onClick={refetch}>Refetch</Button>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  )\n};\n\nReactDOM.render(<ListExample />, mountNode);\n"})},D=t(130),R=t(321),k=t(292),M=t(99),w=t(33),L=t(115),j={data:[{id:1,label:"Item 1"},{id:2,label:"Item 2"},{id:3,label:"Item 3"}],load:function(){var e=this;return new Promise(function(n){setTimeout(function(){return n(Object(R.a)(e.data))},1e3)})},add:function(e){var n=this;return new Promise(function(t){setTimeout(function(){var a=Math.floor(1e3*Math.random()+1);n.data.push({label:e,id:a}),t(a)},1e3)})},remove:function(e){var n=this;return new Promise(function(t){setTimeout(function(){n.data=n.data.filter(function(n){return n.id!==e}),t(e)},1e3)})}},x=function(){var e=Object(L.useQuery)(function(){return j.load()},{defaultData:[]}),n=Object(D.a)(e,2),t=n[0],o=n[1],i=Object(L.useManipulate)(function(e){return j.add(e)}),l=Object(D.a)(i,2),s=l[0],u=l[1],c=Object(L.useManipulate)(function(e){return j.remove(e)}),d=Object(D.a)(c,2),p=d[0],m=d[1],_=Object(L.useLoadingForStates)(t,s,p),f=Object(a.useState)(""),h=Object(D.a)(f,2),b=h[0],v=h[1],E=Object(a.useCallback)(function(e){v(e.target.value)},[v]),g=Object(a.useCallback)(function(e){e&&u(e).then(function(){return o()}).then(function(){return v("")})},[u,o,v]),y=Object(a.useCallback)(function(e){m(e).then(function(){return o()})},[m,o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{loading:_},t.data.map(function(e){return r.a.createElement(k.a.Item,{key:e.id,actions:[r.a.createElement("a",{href:"/",onClick:function(n){n.preventDefault(),y(e.id)}},"delete")]},e.label)})),!_&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(M.a,{value:b,onChange:E,placeholder:"new item label"}),r.a.createElement(w.a,{onClick:function(){return g(b)}},"Add"),r.a.createElement(w.a,{onClick:o},"Refetch")))},B=(t(642),_.a.Content),A=_.a.Footer,S=_.a.Sider,T=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(p.a,{basename:"/"},r.a.createElement(_.a,null,r.a.createElement(S,{breakpoint:"lg",collapsedWidth:"0"},r.a.createElement("div",{className:"logo"},r.a.createElement("a",{href:"https://github.com/Bizico/bizico-react-promise"},r.a.createElement("svg",{height:"32",viewBox:"0 0 16 16",version:"1.1",width:"32"},r.a.createElement("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"})))),r.a.createElement(f.b,{theme:"dark",mode:"inline"},r.a.createElement(v,{key:"2",path:"/base-query",label:"Base Query",exact:!0}),r.a.createElement(v,{key:"3",path:"/base-manipulation",label:"Base Manipulation",exact:!0}),r.a.createElement(v,{key:"4",path:"/manipulation-loaders",label:"Manipulation Loaders",exact:!0}),r.a.createElement(v,{key:"5",path:"/list",label:"List",exact:!0}),r.a.createElement(v,{key:"6",path:"/list-hooks",label:"List (hooks)",exact:!0}))),r.a.createElement(_.a,{style:{minHeight:"100vh"}},r.a.createElement(B,{style:{margin:"24px 16px 0"}},r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/base-query",component:g}),r.a.createElement(m.b,{exact:!0,path:"/base-manipulation",component:y}),r.a.createElement(m.b,{exact:!0,path:"/manipulation-loaders",component:O}),r.a.createElement(m.b,{exact:!0,path:"/list",component:P}),r.a.createElement(m.b,{exact:!0,path:"/list-hooks",component:C}),r.a.createElement(m.b,{exact:!0,path:"/example",component:x}),r.a.createElement(m.a,{to:"/base-query"}))),r.a.createElement(A,{style:{textAlign:"center"}},"Created by Bizico"))))}}]),n}(a.Component);i.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[325,2,1]]]);
//# sourceMappingURL=main.bf0a944b.chunk.js.map